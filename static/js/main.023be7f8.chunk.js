(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,n){"use strict";n.r(t);var a=n(20),i=new(n.n(a).a);t.default=i},10:function(e,t,n){e.exports={controls:"Controls_controls__3YMsS",title:"Controls_title__SE0bN",controller:"Controls_controller__2J85L",dpad:"Controls_dpad__1g8h3",buttons:"Controls_buttons__2tQIl",centered:"Controls_centered__3cY2f",startSelect:"Controls_startSelect__2P8mU"}},17:function(e,t,n){e.exports={app:"PlayScreen_app__YqH5A",main:"PlayScreen_main__20Puq",gameContainer:"PlayScreen_gameContainer__RZY8A",overlay:"PlayScreen_overlay__3Bp0l",controls:"PlayScreen_controls__3f5hq",menu:"PlayScreen_menu__2C0GC"}},18:function(e,t,n){e.exports={appegg:"PlayScreenEgg_appegg__23xP7",main:"PlayScreenEgg_main__34O2l",gameContainer:"PlayScreenEgg_gameContainer__30zBy",overlay:"PlayScreenEgg_overlay__jnd1F",controls:"PlayScreenEgg_controls__34h85",menu:"PlayScreenEgg_menu__2iOqt"}},196:function(e,t,n){},197:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(59),s=n.n(r),o=n(2),l=n(3),u=n(5),c=n(4),f=n(6),m=n(60),h=n(16),d=n(61),p=n.n(d),_=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).setBuffer=n.setBuffer.bind(Object(h.a)(Object(h.a)(n))),n.writeBuffer=n.writeBuffer.bind(Object(h.a)(Object(h.a)(n))),n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("canvas",{className:p.a.screen,width:256,height:240,ref:function(t){t&&e._initCanvas(t)}})}},{key:"setBuffer",value:function(e){for(var t=0;t<240;++t)for(var n=0;n<256;++n){var a=256*t+n;this.buf32[a]=4278190080|e[a]}}},{key:"writeBuffer",value:function(){this.imageData.data.set(this.buf8),this.context.putImageData(this.imageData,0,0)}},{key:"_initCanvas",value:function(e){this.context=e.getContext("2d"),this.imageData=this.context.getImageData(0,0,256,240),this.context.fillStyle="black",this.context.fillRect(0,0,256,240),this.buf=new ArrayBuffer(this.imageData.data.length),this.buf8=new Uint8ClampedArray(this.buf),this.buf32=new Uint32Array(this.buf);for(var t=0;t<this.buf32.length;++t)this.buf32[t]=4278190080}}]),t}(a.Component),y=60.098,v=function(){function e(t){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y;Object(o.a)(this,e),this._run=function(){if(n._isRunning){n._frameId=requestAnimationFrame(n._run);var e=Date.now(),t=e-n._lastTime;t>n._interval&&(n._lastTime=e-t%n._interval,n.onFrame())}},this.onFrame=t,this._fps=a,this._interval=1e3/a,this._lastTime=Date.now(),this._startTime=this._lastTime,this._isRunning=!1}return Object(l.a)(e,[{key:"start",value:function(){this._isRunning=!0,this._run()}},{key:"stop",value:function(){this._isRunning=!1,cancelAnimationFrame(this._frameId)}}]),e}(),g=n(62),b=n.n(g),w=n(7),O=n(1),k=8192,T=function(){function e(){Object(o.a)(this,e),this.bufferSize=k,this.buffer=new b.a(2*this.bufferSize),this.writeSample=this.writeSample.bind(this),this._onAudioProcess=this._onAudioProcess.bind(this)}return Object(l.a)(e,[{key:"start",value:function(){var e=this;this.audioCtx||window.AudioContext&&(this.audioCtx=new window.AudioContext,this.scriptNode=this.audioCtx.createScriptProcessor(1024,0,2),this.scriptNode.onaudioprocess=this._onAudioProcess,this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=w.default.sound.gain,this.gainNode.connect(this.audioCtx.destination),this.scriptNode.connect(this.gainNode),O.default.on("volume",function(t){return e.gainNode&&(e.gainNode.gain.value=t)}))}},{key:"stop",value:function(){this.scriptNode&&(this.gainNode.disconnect(this.audioCtx.destination),this.scriptNode.disconnect(this.gainNode),this.scriptNode.onaudioprocess=null,this.scriptNode=null,this.gainNode=null),this.audioCtx&&(this.audioCtx.close().catch(console.error),this.audioCtx=null),O.default.removeListener("volume")}},{key:"getSampleRate",value:function(){if(!window.AudioContext)return 44100;var e=new window.AudioContext,t=e.sampleRate;return e.close(),t}},{key:"writeSample",value:function(e,t){this.buffer.size()/2>=this.bufferSize&&this.buffer.deqN(this.bufferSize/2),this.buffer.enq(e),this.buffer.enq(t)}},{key:"_onAudioProcess",value:function(e){var t,n=e.outputBuffer.getChannelData(0),a=e.outputBuffer.getChannelData(1),i=n.length;try{t=this.buffer.deqN(2*i)}catch(o){for(var r=0;r<i;r++)n[r]=0,a[r]=0;return}for(var s=0;s<i;s++)n[s]=t[2*s],a[s]=t[2*s+1]}}]),e}(),E=n(21),S=n.n(E),B=[1,2,4,8,16,32,64,128],N=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;Object(o.a)(this,e),this.player=t,this.getNes=n,this.buttons={BUTTON_A:!1,BUTTON_B:!1,BUTTON_SELECT:!1,BUTTON_START:!1,BUTTON_UP:!1,BUTTON_DOWN:!1,BUTTON_LEFT:!1,BUTTON_RIGHT:!1}}return Object(l.a)(e,[{key:"syncAll",value:function(e){this.sync("BUTTON_A",!!(e&B[0])),this.sync("BUTTON_B",!!(e&B[1])),this.sync("BUTTON_SELECT",!!(e&B[2])),this.sync("BUTTON_START",!!(e&B[3])),this.sync("BUTTON_UP",!!(e&B[4])),this.sync("BUTTON_DOWN",!!(e&B[5])),this.sync("BUTTON_LEFT",!!(e&B[6])),this.sync("BUTTON_RIGHT",!!(e&B[7]))}},{key:"sync",value:function(e,t){var n=this.getNes();this.buttons[e]=t,t?n.buttonDown(this.player,S.a.Controller[e]):n.buttonUp(this.player,S.a.Controller[e])}},{key:"resync",value:function(){this.syncAll(this.toByte())}},{key:"toByte",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.buttons;return(e.BUTTON_A&&B[0])|(e.BUTTON_B&&B[1])|(e.BUTTON_SELECT&&B[2])|(e.BUTTON_START&&B[3])|(e.BUTTON_UP&&B[4])|(e.BUTTON_DOWN&&B[5])|(e.BUTTON_LEFT&&B[6])|(e.BUTTON_RIGHT&&B[7])}}]),e}(),C=n(38),j=n(9),A=n.n(j),U=function(e){function t(e,n){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return Object(o.a)(this,t),(a=Object(u.a)(this,Object(c.a)(t).call(this,e,n)))._processGamepadIfPossible=function(){var e=A.a.first(navigator.getGamepads());if(e&&"standard"===e.mapping&&(void 0===window.usesGamepad&&(window.usesGamepad=window.confirm("Use ".concat(e.id,"?")),window.usesGamepad&&O.default.emit("gamepad")),window.usesGamepad)){var t=function(t){return e.buttons[t].pressed};a._setButton("BUTTON_A",t(1)),a._setButton("BUTTON_B",t(0)),a._setButton("BUTTON_SELECT",t(8)),a._setButton("BUTTON_START",t(9)),a._setButton("BUTTON_UP",t(12)),a._setButton("BUTTON_DOWN",t(13)),a._setButton("BUTTON_LEFT",t(14)),a._setButton("BUTTON_RIGHT",t(15)),a._setButton("SWAP",t(5))}},a._onKeyDown=function(e){if(!window.usesGamepad){var t=a.keyMap[e.key];t&&a._setButton(t,!0)}},a._onKeyUp=function(e){if(!window.usesGamepad){var t=a.keyMap[e.key];t&&a._setButton(t,!1)}},a.isMaster=!0,a.needsSwap=!1,a.immediateButtons=A.a.clone(a.buttons),a.onStart=i,a.keyMap=w.default.options.input,a}return Object(f.a)(t,e),Object(l.a)(t,[{key:"swapWith",value:function(e){var t=e.player;return e.player=this.player,this.player=t,this.needsSwap=!1,this.resync(),e.resync(),t}},{key:"resync",value:function(){this.syncAll(Object(C.a)(Object(c.a)(t.prototype),"toByte",this).call(this))}},{key:"toByte",value:function(){return Object(C.a)(Object(c.a)(t.prototype),"toByte",this).call(this,this.immediateButtons)}},{key:"attach",value:function(){var e=this;this.$gamepadInterval=setInterval(this._processGamepadIfPossible,10),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),O.default.on("keymap-updated",function(){return e.keyMap=w.default.options.input})}},{key:"detach",value:function(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),O.default.removeListener("keymap-updated"),clearInterval(this.$gamepadInterval)}},{key:"_setButton",value:function(e,t){"BUTTON_START"===e&&t&&this.onStart(),"SWAP"!==e?this._sync(e,t):1===this.player&&t&&(this.needsSwap=!0)}},{key:"_sync",value:function(e,t){this.immediateButtons[e]=t,this.isMaster&&this.sync(e,t)}}]),t}(N),L={buffering:"Buffering",connected:"Conectado!",connecting:"Conectando...",controls:"- Seu Controle -",copied:"Copiado!",crtEffect:"Efeito CRT",dragARomHere:"Arraste uma ROM de NES aqui!",enabled_false:"Desabilitado",enabled_true:"Habilitado",errors:{connectionFailed:"CONEX\xc3O FALHOU :(",invalidRom:"ROM inv\xe1lida :(",serverIsDown:"O servidor multiplayer n\xe3o est\xe1 online :("},input:"Controle",link:"link",loading:"Carregando...",pressStart:"APERTE START",setDefaults:"Restaurar padr\xf5es",settings:"Configura\xe7\xf5es",shareThis:"Compartilhe o",sound:"Som",swap:"Troca de controle",swapButton:"RB",toPlayWithSomeone:"para jogar com algu\xe9m!",waiting:"Aguardando...",yourController:"Seu controle"},D=function(e){function t(e){var n;Object(o.a)(this,t);var a=function(){return n.nes};return(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).localController=new U(1,a,e.onStartPressed),n.remoteController=new N(2,a),n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(_,{ref:function(t){t&&e._initialize(t)}})}},{key:"componentDidMount",value:function(){this.localController.attach()}},{key:"componentWillUpdate",value:function(e){this.stop()}},{key:"start",value:function(){this.frameTimer.start(),this.speakers.start()}},{key:"stop",value:function(){this.frameTimer.stop(),this.speakers.stop()}},{key:"frame",value:function(){try{this.nes.frame(),this.screen.writeBuffer()}catch(e){this.props.onError(L.errors.invalidRom,!1)}}},{key:"componentWillUnmount",value:function(){this.stop(),this.localController.detach()}},{key:"_initialize",value:function(e){var t=this,n=this.props,a=n.rom,i=n.onError;if(a){var r=m.Buffer.from(a).toString("binary");this.screen=e,this.speakers=new T,this.nes=new E.NES({onFrame:this.screen.setBuffer,onAudioSample:this.speakers.writeSample,sampleRate:this.speakers.getSampleRate()}),this.frameTimer=new v(function(){var e=t.props.syncer;e?e.sync():t.frame()});try{this.nes.loadROM(r)}catch(s){i(L.errors.invalidRom,!1)}window.emulator=this,window.jsnes=S.a}}}]),t}(a.Component),R=n(13),x=n.n(R),P=n(27),F=n(36),I=n.n(F),z=n(63),M=n.n(z),W=n(8),G=n.n(W),H=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.children;return i.a.createElement("section",{className:"message -left"},i.a.createElement("div",{className:G()(I.a.balloon,"nes-balloon","from-left","is-small")},i.a.createElement("p",null,e)),i.a.createElement("br",null),i.a.createElement("img",{className:I.a.character,src:M.a,alt:"character"}))}}]),t}(a.Component),q=n(22),K=n.n(q),J=n(12),V=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={bytes:null},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.children;return i.a.createElement("div",{className:K.a.header},i.a.createElement("div",{className:K.a.small},!A.a.isEmpty(e)&&i.a.createElement(J.Animated,{animationIn:"bounceInLeft",animationOut:"fadeOut",isVisible:!0},i.a.createElement(H,{className:G()(K.a.message,K.a.small)},e))),i.a.createElement("h2",{className:K.a.title}))}}]),t}(a.Component),Y=n(20),Q=n.n(Y),Z=function(){function e(t,n){Object(o.a)(this,e),this.rom=t,this.channel=n,this._sent=0,this._total=t.byteLength}return Object(l.a)(e,[{key:"run",value:function(){if(this._sent===this._total)return this.channel.send("end"),!0;var e=this._total-this._sent,t=Math.min(1024,e),n=this.rom.slice(this._sent,this._sent+t);this._sent+=t,this.channel.send(n)}},{key:"transferred",get:function(){return this._sent}}]),e}(),$=function(){function e(t){Object(o.a)(this,e),this.rom=new ArrayBuffer,this.channel=t,this._received=0}return Object(l.a)(e,[{key:"run",value:function(e){this.rom=this._appendBuffer(this.rom,e),this._received+=e.byteLength,this.channel.send("next")}},{key:"_appendBuffer",value:function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer}},{key:"transferred",get:function(){return this._received}}]),e}(),X=0,ee=1,te=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this))).channel=e,n._reset(),n.channel.on("data",function(e){return n._onData(e)}),n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"sync",value:function(){var e=w.default.buffering.masterBufferLimit;this._state!==ee||this._blindFrames>e?O.default.emit("isLoading",!0):(O.default.emit("isLoading",!1),this._runFrame())}},{key:"initializeRom",value:function(e){this._transfer=new Z(e,this.channel),this._transfer.run(),this.emit("rom",e)}},{key:"updateRom",value:function(e){this.channel.send("new-rom"),this._reset(),this.initializeRom(e)}},{key:"initializeEmulator",value:function(e){this._emulator=e,e.localController.isMaster=!0,e.localController.needsSwap=!1,e.localController.player=1,e.remoteController.player=2,O.default.emit("player",1)}},{key:"onStartPressed",value:function(){}},{key:"onSwap",value:function(){var e=this._emulator.localController.swapWith(this._emulator.remoteController);O.default.emit("player",e)}},{key:"_start",value:function(){this._transfer=null,this._state=ee,this.emit("start"),O.default.emit("message",null),O.default.emit("isLoading",!1)}},{key:"_runFrame",value:function(){var e=w.default.buffering.masterBufferLimit;if(this._buffer.length>e)for(var t=this._buffer.length-e,n=0;n<t;n++)this._buffer.shift();var a=this._buffer.shift();if(a){var i=new Uint8Array(a)[0],r=new Uint8Array(a)[1];this._emulator.remoteController.syncAll(i),(1===this._emulator.localController.player&&this._emulator.localController.needsSwap||1===this._emulator.remoteController.player&&r)&&this.onSwap()}var s=new Uint8Array(3);s[0]=this._emulator.localController.toByte(),s[1]=this._emulator.remoteController.toByte(),s[2]=this._emulator.localController.player,this.channel.send(s),this._blindFrames++,this._emulator.frame()}},{key:"_onData",value:function(e){switch(this._state){case X:if("next"===e)this._transfer.run()&&O.default.emit("message",L.waiting);else"start"===e&&this._start();break;case ee:this._buffer.push(e),this._blindFrames=0}}},{key:"_reset",value:function(){this._state=X,this._transfer=null,this._buffer=[],this._blindFrames=0,O.default.emit("isLoading",!0)}}]),t}(Q.a),ne=0,ae=1,ie=2,re=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this))).channel=e,n._reset(),n.channel.on("data",function(e){return n._onData(e)}),n._hasPressedStart=!1,n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"sync",value:function(){var e=w.default.buffering,t=e.minBufferSize,n=e.maxBufferSize;if(this._buffer.length<t)return this._isBuffering=!0,void O.default.emit("isLoading",!0);if(this._buffer.length>n)for(var a=this._buffer.length-n,i=0;i<a;i++)this._runFrame();this._isBuffering&&this._buffer.length<n||this._runFrame()}},{key:"initializeRom",value:function(e){}},{key:"updateRom",value:function(e){}},{key:"initializeEmulator",value:function(e){this._emulator=e,O.default.emit("isLoading",!1),e.localController.isMaster=!1,e.localController.needsSwap=!1,e.localController.player=2,e.remoteController.player=1,O.default.emit("player",2)}},{key:"onStartPressed",value:function(){this._state===ae&&(this._hasPressedStart=!0,this._start())}},{key:"onSwap",value:function(){var e=this._emulator.localController.swapWith(this._emulator.remoteController);O.default.emit("player",e)}},{key:"_start",value:function(){this.emit("start"),this.channel.send("start"),O.default.emit("message",null),this._state=ie}},{key:"_runFrame",value:function(){this._isBuffering=!1,O.default.emit("isLoading",!1);var e=this._buffer.shift(),t=new Uint8Array(e)[0],n=new Uint8Array(e)[1],a=new Uint8Array(e)[2];this._emulator.remoteController.syncAll(t),this._emulator.localController.syncAll(n),a!==this._emulator.remoteController.player&&this.onSwap(),this._emulator.frame()}},{key:"_onData",value:function(e){if("new-rom"!==e)switch(this._state){case ne:"end"===e?(this.emit("rom",this._transfer.rom),this._transfer=null,this._hasPressedStart?this._start():(O.default.emit("message",L.pressStart),this._state=ae)):this._transfer.run(e);break;case ie:if(!this._emulator)return;this._buffer.push(e);var t=new Uint8Array(2);t[0]=this._emulator.localController.toByte(),t[1]=+this._emulator.localController.needsSwap,this.channel.send(t)}else this._reset()}},{key:"_reset",value:function(){this._state=ne,this._transfer=new $(this.channel),this._isBuffering=!1,this._buffer=[],O.default.emit("isLoading",!0)}}]),t}(Q.a),se=n(15),oe=n.n(se),le=1e3,ue=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={token:null,copied:!1,isDown:!1},n._copyLink=function(e){e.preventDefault(),navigator.clipboard.writeText(e.target.href),n.setState({copied:!0}),setTimeout(function(){n.setState({copied:!1})},le)},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.needsRom,t=this.state,n=t.token,a=t.copied,r=t.isDown;return i.a.createElement(V,null,a?i.a.createElement("span",null,L.copied):e?i.a.createElement("span",null,L.dragARomHere):n?i.a.createElement("span",null,L.shareThis," ",i.a.createElement("a",{href:"?token=".concat(n,"#/join"),onClick:this._copyLink,tabIndex:"-1"},L.link)," ",L.toPlayWithSomeone):r?i.a.createElement("span",null,L.errors.serverIsDown):i.a.createElement("span",null,L.loading))}},{key:"componentDidUpdate",value:function(){var e=Object(P.a)(x.a.mark(function e(t){var n,a,i,r,s,o=this;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,a=n.needsRom,i=n.onSyncer,r=n.onError,!a&&!this.channel){e.next=3;break}return e.abrupt("return");case 3:return s=function(){o.channel=null,o.setState({token:null,copied:!1}),r()},e.prev=4,e.next=7,oe.a.createChannel();case 7:this.channel=e.sent,this.channel.on("connected",function(){i(new te(o.channel))}).on("timeout",s).on("disconnected",s),this.setState({token:this.channel.token,isDown:!1}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),this.setState({isDown:!0});case 15:case"end":return e.stop()}},e,this,[[4,12]])}));return function(t){return e.apply(this,arguments)}}()}]),t}(a.Component),ce=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(V,null,i.a.createElement("span",null,L.connecting))}},{key:"componentDidMount",value:function(){var e=Object(P.a)(x.a.mark(function e(){var t,n,a,i;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.onSyncer,a=t.onError,e.prev=1,e.next=4,oe.a.joinChannel(this.props.token);case 4:(i=e.sent).on("connected",function(){n(new re(i))}).on("timeout",a).on("disconnected",a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a();case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()}]),t}(a.Component),fe=n(64),me=n.n(fe),he=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i))))._onAssign=function(){n.props.isAssigning?n.props.onAssignCancel():n.props.onAssignStart()},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.displayName,n=e.isAssigning,a=e.verticalMirror,r=void 0!==a&&a;return i.a.createElement("button",{type:"button",className:"nes-btn is-primary",onClick:this._onAssign},i.a.createElement("span",{style:r?{transform:"scale(1, -1)",display:"inline-block"}:null},n?"...":t))}}]),t}(a.Component),de=n(28),pe=n.n(de),_e=1920,ye=[{name:"BUTTON_LEFT",displayName:"<"},{name:"BUTTON_RIGHT",displayName:">"},{name:"BUTTON_UP",displayName:"v",verticalMirror:!0},{name:"BUTTON_DOWN",displayName:"v"},{name:"BUTTON_B",displayName:"B"},{name:"BUTTON_A",displayName:"A"},{name:"BUTTON_SELECT",displayName:"SELECT"},{name:"BUTTON_START",displayName:"START"},{name:"SWAP",displayName:"<SWAP>"}],ve=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={mappingButton:null},n._onClose=function(){O.default.emit("closeSettings")},n._onSetDefaults=function(){w.default.reset(),n._notify()},n._onAssign=function(){n.props.isAssigning||(n.props.onAssignStart(),window.addEventListener("keydown",n._onKeyDown))},n._onKeyDown=function(e){if(n.state.mappingButton){e.preventDefault();var t=A.a.findKey(w.default.options.input,function(e){return e===n.state.mappingButton}),a=e.key;delete w.default.options.input[t],w.default.options.input[a]=n.state.mappingButton,w.default.save(),n._notify(),n.setState({mappingButton:null})}},n._onResize=function(){var e=window.innerWidth,t=document.querySelector("#settings"),n=e/_e;t.style.transform="scale(".concat(n,")")},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("resize",this._onResize),this._onResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("resize",this._onResize)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:pe.a.settings,id:"settings"},i.a.createElement("button",{type:"button",className:G()(pe.a.closeButton,"nes-btn","is-error"),onClick:this._onClose},"x"),i.a.createElement("button",{type:"button",className:G()(pe.a.setDefaultsButton,"nes-btn","is-warning"),onClick:this._onSetDefaults},L.setDefaults),i.a.createElement("section",{className:G()("nes-container","is-dark","with-title")},i.a.createElement("div",{className:"title"},L.sound),i.a.createElement("div",null,w.default.soundOptions.map(function(t){return i.a.createElement("label",{key:t.name},i.a.createElement("input",{type:"radio",className:"nes-radio is-dark",name:"sound",checked:w.default.options.sound===t.name,onChange:function(n){return e._update("sound",t.name)}}),i.a.createElement("span",null,t.name))}))),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("section",{className:G()("nes-container","is-dark","with-title")},i.a.createElement("div",{className:"title"},L.buffering),i.a.createElement("div",null,w.default.bufferingOptions.map(function(t){return i.a.createElement("label",{key:t.name},i.a.createElement("input",{type:"radio",className:"nes-radio is-dark",name:"buffering",checked:w.default.options.buffering===t.name,onChange:function(){return e._update("buffering",t.name)}}),i.a.createElement("span",null,t.name))}))),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("section",{className:G()("nes-container","is-dark","with-title")},i.a.createElement("div",{className:"title"},L.crtEffect),i.a.createElement("div",null,[!0,!1].map(function(t){return i.a.createElement("label",{key:t},i.a.createElement("input",{type:"radio",className:"nes-radio is-dark",name:"crt",checked:w.default.options.crt===t,onChange:function(){return e._update("crt",t)}}),i.a.createElement("span",null,L["enabled_".concat(t)]))}))),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("section",{className:G()("nes-container","is-dark","with-title")},i.a.createElement("div",{className:"title"},L.input),ye.map(function(t){return i.a.createElement(he,{key:t.name,name:t.name,verticalMirror:t.verticalMirror,displayName:t.displayName,isAssigning:e.state.mappingButton===t.name,onAssignStart:function(){return e.setState({mappingButton:t.name})},onAssignCancel:function(){return e.setState({mappingButton:null})}})})))}},{key:"_update",value:function(e,t){A.a.set(w.default.options,e,t),w.default.save(),this._notify()}},{key:"_notify",value:function(){O.default.emit("volume",w.default.sound.gain),O.default.emit("keymap");var e=document.querySelector("#container");w.default.options.crt?e.classList.add("crt"):e.classList.remove("crt"),this.forceUpdate()}}]),t}(a.Component),ge=n(23),be=n.n(ge),we=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={isSettingsMenuOpen:!1,isLoading:!1,message:null},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.isVisible,t=this.state,n=t.isSettingsMenuOpen,a=t.isLoading,r=t.message;return i.a.createElement("div",{className:G()(be.a.overlay,e&&be.a.show)},i.a.createElement("div",{className:G()(be.a.loader,null==r&&be.a.dark)},n?i.a.createElement(ve,null):null!=r?i.a.createElement("div",{className:be.a.message},r):a&&i.a.createElement(me.a,{type:"Watch",color:"#CCCCCC",height:"50",width:"50"})))}},{key:"componentDidMount",value:function(){var e=this;O.default.on("isLoading",function(t){e.setState({isLoading:t})}).on("message",function(t){e.setState({isLoading:!1,message:t})}).on("openSettings",function(){e.setState({isSettingsMenuOpen:!0})}).on("closeSettings",function(){e.setState({isSettingsMenuOpen:!1})})}},{key:"componentWillUnmount",value:function(){O.default.removeListener("isLoading"),O.default.removeListener("message"),O.default.removeListener("openSettings"),O.default.removeListener("closeSettings")}},{key:"isVisible",get:function(){return this.state.isSettingsMenuOpen||this.state.isLoading||null!=this.state.message}}]),t}(a.Component),Oe=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("canvas",{style:{width:"100%",height:"100%",borderRadius:8},width:256,height:240,ref:function(t){t&&e._initCanvas(t)}})}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this._frameId)}},{key:"_initCanvas",value:function(e){var t=this,n=e.getContext("2d");var a=!0;!function e(){(a=!a)?t._frameId=requestAnimationFrame(e):(!function(e){for(var t=e.canvas.width,n=e.canvas.height,a=e.createImageData(t,n),i=new Uint32Array(a.data.buffer),r=i.length,s=0;s<r;)i[s++]=(255*Math.random()|0)<<24;e.putImageData(a,0,0)}(n),t._frameId=requestAnimationFrame(e))}()}}]),t}(a.Component),ke={cleanQueryString:function(){var e;e=(e=(e=(e=window.location.href).replace(e.substring(e.indexOf("?")),"")).substring(e.indexOf("//")+2)).substring(e.indexOf("/")),window.history.replaceState({},"",e)},ellipsize:function(e,t){return"".concat(e.substring(0,t)).concat(e.length>t?"\u2026":"")}},Te=n(10),Ee=n.n(Te),Se={ArrowLeft:"<",ArrowRight:">",ArrowUp:"~v",ArrowDown:"v"," ":"[Space]"},Be=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={player:1},n._onGamepadConnected=function(e){n.usesGamepad=!0,n.forceUpdate(),n.blink()},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this._keyFor("BUTTON_UP"),t="~v"===e;return i.a.createElement("div",{className:Ee.a.controls},i.a.createElement("b",{className:G()(Ee.a.title,Ee.a.centered)},L.controls),i.a.createElement("b",{className:G()(Ee.a.title,Ee.a.centered)},this.state.player,"P"),1===this.state.player?i.a.createElement("b",{className:G()(Ee.a.dpad,Ee.a.centered)},"(",L.swap,":"," ",this.usesGamepad?L.swapButton:this._keyFor("SWAP"),")"):i.a.createElement("br",null),i.a.createElement("br",null),this.usesGamepad?i.a.createElement("div",{className:Ee.a.centered},L.yourController):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:Ee.a.controller},i.a.createElement("span",{className:Ee.a.dpad},i.a.createElement("span",null,this._keyFor("BUTTON_LEFT"))," ",i.a.createElement("span",null,this._keyFor("BUTTON_RIGHT"))," ",i.a.createElement("span",{style:t?{transform:"scale(1, -1)",display:"inline-block"}:null},t?"v":e)," ",i.a.createElement("span",null,this._keyFor("BUTTON_DOWN"))),i.a.createElement("span",{className:Ee.a.buttons},this._keyFor("BUTTON_B")," ",this._keyFor("BUTTON_A"))),i.a.createElement("div",{className:Ee.a.startSelect},this._keyFor("BUTTON_SELECT")," ",this._keyFor("BUTTON_START"))))}},{key:"blink",value:function(){var e=document.querySelector("#root");e.classList.remove("blink"),setTimeout(function(){return e.classList.add("blink")},100)}},{key:"componentDidMount",value:function(){var e=this;O.default.on("keymap",function(){O.default.emit("keymap-updated"),e.forceUpdate(),e.blink()}).on("player",function(t){e.setState({player:t}),e.blink()}).on("gamepad",this._onGamepadConnected).on("reset",function(){e.setState({player:1})})}},{key:"componentWillUnmount",value:function(){O.default.removeListener("keymap")}},{key:"_keyFor",value:function(e){var t=A.a.findKey(w.default.options.input,function(t){return t===e});return t?this._format(t):"[?]"}},{key:"_format",value:function(e){return Se[e]||(1===e.length?e.toUpperCase():"[".concat(ke.ellipsize(e,6),"]"))}}]),t}(a.Component),Ne=n(65),Ce=n.n(Ne),je=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i))))._onClick=function(){O.default.emit("openSettings")},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:Ce.a.button},i.a.createElement("button",{type:"button",tabIndex:"-1",className:"nes-btn",onClick:this._onClick},L.settings))}}]),t}(a.Component),Ae=n(17),Ue=n.n(Ae);window.bus=n(1).default,window.config=n(7).default;var Le=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={rom:null,syncer:null},n._onSyncer=function(e){n.setState({syncer:e}),e.on("rom",function(t){n._loadRom(t,function(){return e.initializeEmulator(n.emulator)},!1)}),e.on("start",function(){return n.emulator&&n.emulator.start()}),e.initializeRom(n.state.rom)},n._onFileDrop=function(e){e.preventDefault();var t=A.a.first(e.dataTransfer.files),a=new FileReader;t&&(a.onload=function(e){var t=e.target.result;n.state.syncer?n.state.syncer.updateRom(t):n._loadRom(t)},a.readAsArrayBuffer(t))},n._ignore=function(e){e.stopPropagation(),e.preventDefault()},n._onStartPressed=function(){n.state.syncer&&n.state.syncer.onStartPressed()},n._onError=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.setState({rom:null}),O.default.emit("message",e||L.errors.connectionFailed),t&&(O.default.emit("reset"),n.setState({syncer:null}),ke.cleanQueryString(),window.location.href="#/")},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.token,n=this.state,a=n.rom,r=n.syncer;return i.a.createElement("div",{className:Ue.a.app},r?i.a.createElement(V,null,L.connected):t?i.a.createElement(J.Animated,{animationIn:"bounceInLeft",animationOut:"fadeOut",isVisible:!0},i.a.createElement(ce,{onSyncer:this._onSyncer,onError:this._onError,token:t})):i.a.createElement(ue,{onSyncer:this._onSyncer,onError:this._onError,needsRom:!a}),i.a.createElement("div",{className:Ue.a.main},i.a.createElement("section",{className:G()(Ue.a.gameContainer,"nes-container","is-dark","with-title")},i.a.createElement("div",{className:Ue.a.overlay},i.a.createElement(we,null)),a?i.a.createElement(D,{rom:a,syncer:r,onStartPressed:this._onStartPressed,onError:this._onError,ref:function(t){return e.emulator=t}}):i.a.createElement(Oe,null))),i.a.createElement("div",{className:Ue.a.controls},i.a.createElement(J.Animated,{animationIn:"bounceInDown",animationOut:"fadeOut",isVisible:!0},i.a.createElement(Be,null))),i.a.createElement("div",{className:Ue.a.menu},i.a.createElement(J.Animated,{animationIn:"bounceInRight",animationOut:"fadeOut",isVisible:!0},i.a.createElement(je,null))))}},{key:"componentDidMount",value:function(){window.addEventListener("dragover",this._ignore),window.addEventListener("dragenter",this._ignore),window.addEventListener("drop",this._onFileDrop),w.default.options.crt&&document.querySelector("#container").classList.add("crt")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragover",this._ignore),window.removeEventListener("dragenter",this._ignore),window.removeEventListener("drop",this._onFileDrop)}},{key:"_loadRom",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.a.noop,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];O.default.emit("message",null),this.setState({rom:e},function(){n(),a&&t.emulator.start()})}},{key:"_dataURItoBlob",value:function(e){for(var t=e,n=new ArrayBuffer(t.length),a=new Uint8Array(n),i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return new Blob([n])}}]),t}(a.Component),De=n(37),Re=n.n(De),xe=n(18),Pe=n.n(xe);window.bus=n(1).default,window.config=n(7).default;a.Component;oe.a.setStore(new se.SimpleStore("https://tokens.rodrigo.londrina.br/.netlify/functions/server"));var Fe=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return window.location.hash.startsWith("#/join")?i.a.createElement(Le,{token:this.inviteToken}):i.a.createElement(Le,null)}},{key:"UNSAFE_componentWillMount",value:function(){var e=this;this._listener=window.addEventListener("hashchange",function(t){e.forceUpdate()})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("hashchange",this._listener)}},{key:"inviteToken",get:function(){return Re.a.parse(window.location.search).token}},{key:"eggToken",get:function(){return Re.a.parse(window.location.search).egg}}]),t}(a.PureComponent);n(195),n(196),n(197),n(198);s.a.render(i.a.createElement(Fe,null),document.getElementById("root"))},22:function(e,t,n){e.exports={header:"Header_header__31Pzs",small:"Header_small__s-C87",message:"Header_message__3HU8Y",title:"Header_title__dsLcg",titleLogo:"Header_titleLogo__3haEv",titleText:"Header_titleText__24rZs",link:"Header_link__2VlsV"}},23:function(e,t,n){e.exports={overlay:"Overlay_overlay__1xMsU",show:"Overlay_show__2zg7a",loader:"Overlay_loader__1-pwz",dark:"Overlay_dark__3Ahzq",message:"Overlay_message__8ZHHR"}},28:function(e,t,n){e.exports={settings:"Settings_settings__3F41t",closeButton:"Settings_closeButton__3UiKv",setDefaultsButton:"Settings_setDefaultsButton__2bnJr"}},36:function(e,t,n){e.exports={balloon:"BalloonMessage_balloon__BjJlJ",character:"BalloonMessage_character__3n8lP"}},61:function(e,t,n){e.exports={screen:"Screen_screen__2E4B5"}},63:function(e,t,n){e.exports=n.p+"static/media/rodrigo_profile_picture.39873869.png"},65:function(e,t,n){e.exports={button:"SettingsButton_button__3AkWQ"}},66:function(e,t,n){e.exports=n(199)},7:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n(3),r=function(){function e(){Object(a.a)(this,e),this.options=this.defaultOptions,this.load()}return Object(i.a)(e,[{key:"save",value:function(){localStorage.setItem("options",JSON.stringify(this.options))}},{key:"load",value:function(){try{this.options=JSON.parse(localStorage.getItem("options"))||this.defaultOptions}catch(e){this.reset()}}},{key:"reset",value:function(){this.options=this.defaultOptions,this.save()}},{key:"sound",get:function(){var e=this;return this.soundOptions.find(function(t){return t.name===e.options.sound})}},{key:"buffering",get:function(){var e=this;return this.bufferingOptions.find(function(t){return t.name===e.options.buffering})}},{key:"defaultOptions",get:function(){return{sound:"50%",buffering:"Curto",crt:!0,input:{z:"BUTTON_A",x:"BUTTON_B",Delete:"BUTTON_SELECT",Enter:"BUTTON_START",ArrowUp:"BUTTON_UP",ArrowDown:"BUTTON_DOWN",ArrowLeft:"BUTTON_LEFT",ArrowRight:"BUTTON_RIGHT",r:"SWAP"}}}},{key:"soundOptions",get:function(){return[{name:"100%",gain:1},{name:"90%",gain:.9},{name:"75%",gain:.75},{name:"50%",gain:.5},{name:"25%",gain:.25},{name:"10%",gain:.1},{name:"0%",gain:0}]}},{key:"bufferingOptions",get:function(){return[{name:"Desabilitado",masterBufferLimit:3,minBufferSize:1,maxBufferSize:1},{name:"Curto",masterBufferLimit:3,minBufferSize:1,maxBufferSize:2},{name:"Medio",masterBufferLimit:5,minBufferSize:2,maxBufferSize:3},{name:"Alto",masterBufferLimit:5,minBufferSize:3,maxBufferSize:5}]}}]),e}();t.default=new r}},[[66,1,2]]]);
//# sourceMappingURL=main.023be7f8.chunk.js.map